# API de Licenciamento – Exemplos de Uso

## 🔐 CLIENTE – Solicitar Licença
**POST /solicitacao**

Body:
{
  "device_id": "1234567890ABCDEF"
}

Resposta:
- status: "aprovado"
- status: "bloqueado"
- status: "pendente"

---

## 🔐 CLIENTE – Verificar Licença
**POST /licenca/verificar**

Body:
{
  "token": "meu-token-licenca"
}

Resposta:
{
  "dias_restantes": 7,
  "data_validade": "2025-07-05",
  "erp_nome": "ERP VarejoFácil"
}

---

## 🧑‍💼 ADMIN – Listar Solicitações Pendentes
**GET /admin/solicitacoes**

Resposta:
[
  {
    "id": 1,
    "device_id": "1234567890ABCDEF",
    "data": "2025-06-27T14:00:00Z"
  }
]

---

## ✅ ADMIN – Aprovar Solicitação
**POST /admin/aprovar**

Body:
{
  "device_id": "1234567890ABCDEF",
  "token": "meu-token-unico",
  "erp_nome": "ERP VarejoFácil",
  "dias": 7
}

Resposta:
{
  "status": "Licença aprovada e registrada",
  "validade": "2025-07-04"
}

---

## 📋 ADMIN – Listar Licenças
**GET /admin/licencas**

Exemplos:
- /admin/licencas?status=ativo
- /admin/licencas?status=inativo

Resposta:
[
  {
    "device_id": "1234567890ABCDEF",
    "token": "meu-token-unico",
    "erp_nome": "ERP VarejoFácil",
    "data_validade": "2025-07-04",
    "autorizado": true
  }
]

---

## 🚫 ADMIN – Bloquear Licença
**POST /admin/bloquear**

Body:
{
  "token": "meu-token-unico"
}

Resposta:
{
  "status": "Licença bloqueada com sucesso"
}

---

## 🔁 ADMIN – Reativar Licença
**POST /admin/reativar**

Body:
{
  "token": "meu-token-unico"
}

Resposta:
{
  "status": "Licença reativada com sucesso"
}

---

## ❌ ADMIN – Excluir Licença
**POST /admin/excluir-licenca**

Body:
{
  "token": "meu-token-unico"
}

Resposta:
{
  "status": "Licença excluída com sucesso"
}

---

## 🗑️ ADMIN – Excluir Solicitação
**POST /admin/excluir-solicitacao**

Body:
{
  "device_id": "1234567890ABCDEF"
}

Ou para apagar todas:
{}

Resposta:
{
  "status": "Solicitação do device_id 1234567890ABCDEF excluída"
}

---

## ✅ Checklist de Testes no Postman:

| Método | URL                          | Requer Body? | Finalidade                          |
|--------|------------------------------|--------------|-------------------------------------|
| POST   | /solicitacao                 | Sim          | Cliente solicita licença            |
| POST   | /licenca/verificar           | Sim          | Cliente verifica validade do token  |
| GET    | /admin/solicitacoes          | Não          | Admin vê pendências                 |
| POST   | /admin/aprovar               | Sim          | Admin aprova licença nova           |
| GET    | /admin/licencas              | Não ou filtro| Admin lista licenças                |
| POST   | /admin/bloquear              | Sim          | Admin bloqueia                      |
| POST   | /admin/reativar              | Sim          | Admin reativa                       |
| POST   | /admin/excluir-licenca       | Sim          | Admin exclui licença                |
| POST   | /admin/excluir-solicitacao   | Sim ou vazio | Admin exclui solicitações           |
